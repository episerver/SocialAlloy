@using EPiServer.SocialAlloy.Web
@model ProductViewModel<ProductPage>
@{ Layout = "~/Views/Shared/Layouts/_TwoPlusOne.cshtml"; }

        @if (this.User.Identity.IsAuthenticated)
        {
            <script type="text/javascript">
                function Reset() {
                    var dropDownItems = document.getElementsByName("UserRating");
                    for (var i = 0; i < dropDownItems.length; i++) {
                        dropDownItems[i].checked = false;
                    }
                }
            </script>
            
            using (Html.BeginForm("Rate", "ProductPage"))
            {
                <div class="clearfix">
                    <div style="margin-top:1em;"><i>Rate the page</i></div>
                    <div>
                        <ul style="margin-left:1em;"  >
                            @for (var numOfRatings = 0; numOfRatings < @Model.PageRatings.Count; numOfRatings++)
                            {
                                <li style="list-style-type:none; display:inline">
                                    @Html.RadioButtonFor(r => Model.UserRating, Model.PageRatings[numOfRatings], new { @class = "userrating" })
                                </li>
                            }
                        </ul>
                    </div>
                    <div>
                        <button type="submit" role="button" class="btn btn-primary" style="width:20%">Submit</button>
                        <a href="#" id="btnReset" value="Reset" onclick="Reset(); return false;">Reset</a>
                    </div>
                </div>
            }
        }

        <h1 @Html.EditAttributes(x => x.CurrentPage.PageName)>@Model.CurrentPage.PageName</h1>
        <p class="introduction" @Html.EditAttributes(x => x.CurrentPage.MetaDescription)>@Model.CurrentPage.MetaDescription</p>
        <div class="row">
            <div class="span8 clearfix" @Html.EditAttributes(x => x.CurrentPage.MainBody)>
                @Html.DisplayFor(m => m.CurrentPage.MainBody)
            </div>
        </div>
        @Html.PropertyFor(x => x.CurrentPage.MainContentArea, new { CssClass = "row", Tag = Global.ContentAreaTags.TwoThirdsWidth })

        @section RelatedContent
{
            <div @Html.EditAttributes(x => x.CurrentPage.PageImage)>
                <img src="@Url.ContentUrl(Model.CurrentPage.PageImage)" />
            </div>

            <div class="block colorBox @string.Join(" ", @Model.CurrentPage.GetThemeCssClassNames())">
                <h2 @Html.EditAttributes(x => x.CurrentPage.PageName)>@Model.CurrentPage.PageName</h2>
                @Html.PropertyFor(x => x.CurrentPage.UniqueSellingPoints)
            </div>

            @Html.PropertyFor(x => x.CurrentPage.RelatedContentArea, new { CssClass = "row", Tag = Global.ContentAreaTags.OneThirdWidth })
        }
